var Taffy;!function(t){"use strict";var e=function(){function t(e){this._overflow=!1,this._value=0,this._value=t.truncate(e),this._overflow=this._value!==e}return Object.defineProperty(t.prototype,"overflow",{get:function(){return this._overflow},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),t.truncate=function(e){return e>t.MAX_VALUE?t.MAX_VALUE:e<t.MIN_VALUE?t.MIN_VALUE:0|e},t.mod=function(t){return(0|Math.abs(t))%256},t.isByte=function(e){return e>=t.MIN_VALUE&&e<=t.MAX_VALUE},t}();e.MIN_VALUE=0,e.MAX_VALUE=255,t.Byte=e}(Taffy||(Taffy={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Taffy;!function(t){"use strict";var e=function(){function e(t,e,n,o){this.reHex=/^#?([\da-f]{3}|[\da-f]{6})$/i,this.reRgb=/^rgb\s*\(\s*(\d{0,3})\s*,\s*(\d{0,3})\s*,\s*(\d{0,3})\s*\)$/i,this.reRgba=/^rgba\s*\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*((0\.|\.)?\d+)\s*\)$/i,arguments.length>=3?(this.r=this.validateByte(arguments[0]),this.g=this.validateByte(arguments[1]),this.b=this.validateByte(arguments[2]),4===arguments.length?this.a=Math.min(1,Math.max(0,arguments[3])):this.a=1):this.parse(t)}return e.prototype.red=function(){return this.r},e.prototype.green=function(){return this.g},e.prototype.blue=function(){return this.b},e.prototype.alpha=function(){return this.a},e.prototype.toRGB=function(){return this._rgb||(this._rgb="rgb("+this.r+","+this.g+","+this.b+")")},e.prototype.toRGBA=function(t){return this._rgba||(this._rgba="rgba("+this.r+","+this.g+","+this.b+","+(t||this.a)+")")},e.prototype.toHex=function(t){return void 0===t&&(t=!1),this._hex?this._hex:(this._hex="#"+this.toColorPart(this.r)+this.toColorPart(this.g)+this.toColorPart(this.b),t&&(this._hex=this._hex.replace(/^#([\da-f])\1([\da-f])\2([\da-f])\3$/i,"#$1$2$3")),this._hex)},e.prototype.lighter=function(n){void 0===n&&(n=.1);var o=1+n;return new e(t.Byte.truncate(o*this.r),t.Byte.truncate(o*this.g),t.Byte.truncate(o*this.b),this.a)},e.prototype.darker=function(n){void 0===n&&(n=.1);var o=Math.max(0,1-n);return new e(t.Byte.truncate(o*this.r),t.Byte.truncate(o*this.g),t.Byte.truncate(o*this.b),this.a)},e.prototype.fade=function(t){void 0===t&&(t=.1);var n=Math.max(0,1-t);return new e(this.r,this.g,this.b,n*this.a)},e.prototype.validateByte=function(e){if(!t.Byte.isByte(e))throw new Error("Invalid value for color component: "+e);return e},e.prototype.toColorPart=function(t){return(t<16?"0":"")+t.toString(16)},e.prototype.parse=function(e){if(this.reHex.test(e))e=e.replace(/^#/,""),e=e.replace(/^([\da-f])([\da-f])([\da-f])$/i,"$1$1$2$2$3$3"),this.r=t.Convert.toInt(e.slice(0,2),16),this.g=t.Convert.toInt(e.slice(2,4),16),this.b=t.Convert.toInt(e.slice(4,6),16),this.a=1;else if(this.reRgb.test(e)){var n=e.match(this.reRgb);this.r=t.Convert.toInt(n[1]),this.g=t.Convert.toInt(n[2]),this.b=t.Convert.toInt(n[3]),this.a=1}else if(this.reRgba.test(e)){var n=e.match(this.reRgba);this.r=t.Convert.toInt(n[1]),this.g=t.Convert.toInt(n[2]),this.b=t.Convert.toInt(n[3]),this.a=t.Convert.toFloat(n[4])}},e}();t.Color=e,t.colors={red:new e(255,0,0),yellow:new e(255,255,0),green:new e(0,255,0),cyan:new e(0,255,255),blue:new e(0,0,255),purple:new e(255,0,255)};var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.red=function(e){return t.System.isUndefined(e)?this.r:(this.r=this.validateByte(e),this.reset(),this)},n.prototype.green=function(e){return t.System.isUndefined(e)?this.g:(this.g=this.validateByte(e),this.reset(),this)},n.prototype.blue=function(e){return t.System.isUndefined(e)?this.b:(this.b=this.validateByte(e),this.reset(),this)},n.prototype.alpha=function(e){return t.System.isUndefined(e)?this.a:(this.a=Math.min(1,Math.max(0,e)),this.reset(),this)},n.prototype.lighter=function(e){void 0===e&&(e=.1);var n=1+e;return this.red(t.Byte.truncate(n*this.r)).green(t.Byte.truncate(n*this.g)).blue(t.Byte.truncate(n*this.b))},n.prototype.darker=function(e){void 0===e&&(e=.1);var n=Math.max(0,1-e);return this.red(t.Byte.truncate(n*this.r)).green(t.Byte.truncate(n*this.g)).blue(t.Byte.truncate(n*this.b))},n.prototype.fade=function(t){void 0===t&&(t=.1);var e=Math.max(0,1-t);return this.alpha(e*this.a)},n.prototype.reset=function(){this._rgb=this._rgba=this._hex=null},n}(e);t.MutableColor=n}(Taffy||(Taffy={}));var Taffy;!function(t){"use strict";!function(e){function n(t){return parseFloat(t)}function o(t,e){return void 0===e&&(e=10),parseInt(t,e)}function i(e){return t.System.isNullOrUndefined(e)?"":e.toString()}function r(t){var e="";return t.split("-").forEach(function(t,n){e+=n>0?t[0].toUpperCase()+t.slice(1):t}),e}e.toFloat=n,e.toInt=o,e.toString=i,e.toCamelCase=r}(t.Convert||(t.Convert={}))}(Taffy||(Taffy={}));var Taffy;!function(t){"use strict";var e=function(){function t(t,e){this.fileType=t,this.data=e,this.createdDate=new Date,this.updatedDate=new Date}return t}();t.JsonFile=e}(Taffy||(Taffy={}));var Taffy;!function(t){"use strict";!function(t){t[t.NUL=0]="NUL",t[t.TAB=9]="TAB",t[t.ENTER=13]="ENTER",t[t.SHIFT=16]="SHIFT",t[t.CONTROL=17]="CONTROL",t[t.ALT=18]="ALT",t[t.ESCAPE=27]="ESCAPE",t[t.SPACE=32]="SPACE",t[t.HOME=36]="HOME",t[t.LEFT=37]="LEFT",t[t.UP=38]="UP",t[t.RIGHT=39]="RIGHT",t[t.DOWN=40]="DOWN",t[t.DELETE=46]="DELETE",t[t.NUM0=48]="NUM0",t[t.NUM1=49]="NUM1",t[t.NUM2=50]="NUM2",t[t.NUM3=51]="NUM3",t[t.NUM4=52]="NUM4",t[t.NUM5=53]="NUM5",t[t.NUM6=54]="NUM6",t[t.NUM7=55]="NUM7",t[t.NUM8=56]="NUM8",t[t.NUM9=57]="NUM9",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.PLUS=107]="PLUS",t[t.MINUS=109]="MINUS",t[t.COMMA=188]="COMMA",t[t.PERIOD=190]="PERIOD"}(t.KeyCode||(t.KeyCode={}))}(Taffy||(Taffy={}));var Taffy;!function(t){"use strict";var e=function(){function t(){this._map={}}return t.prototype.setItem=function(t,e){this._map[t]=e},t.prototype.getItem=function(t){return this._map[t]},t.prototype.removeItem=function(t){delete this._map[t]},t.prototype.clear=function(){this._map={}},t.prototype.containsKey=function(t){return void 0!==this._map[t]},t.prototype.each=function(t){for(var e in this._map)t(this._map[e],e,this)},t.prototype.eachKey=function(t){for(var e in this._map)t(e)},t}();t.Map=e}(Taffy||(Taffy={}));var Taffy;!function(t){"use strict";!function(t){function e(t){return void 0===t&&(t=1),Math.random()*t}function n(t,e){void 0===t&&(t=0),void 0===e&&(e=1);var n=e-t;return Math.random()*n+t}function o(t,e){return 0|n(t,e+1)}function i(t){return 0|e(t+1)}function r(){return Math.random()<.5}t.nextTo=e,t.next=n,t.nextInt=o,t.nextIntTo=i,t.nextBoolean=r}(t.Random||(t.Random={}))}(Taffy||(Taffy={}));var Taffy;!function(t){"use strict";var e=function(){function t(t,e,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=0),this.x=t,this.y=e,this.w=n,this.h=o}return Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.h},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.w},enumerable:!0,configurable:!0}),t.prototype.moveTo=function(t,e){return this.x=t,this.y=e,this},t.prototype.intersects=function(t){return this.x<t.x+t.w&&this.x+this.w>t.x&&this.y<t.y+t.h&&this.y+this.h>t.y},t.prototype.contains=function(t,e){return this.x<t&&this.x+this.w>t&&this.y<e&&this.y+this.h>e},t}();t.Rectangle=e}(Taffy||(Taffy={}));var Taffy;!function(t){"use strict";!function(t){function e(t){return JSON.parse(JSON.stringify(t))}function n(t){return null===t||void 0===t}function o(t){return void 0===t}function i(t){return"number"==typeof t}function r(t){return"string"==typeof t}function s(t){return!n(t)&&isFinite(t)}function a(t){return isNaN(t)}function u(t){return 0|t}function c(e){t.setTimeout(e,0)}function h(t){return JSON.stringify(t)}function f(t){return JSON.parse(t)}t.Console=window?window.console:console,t.clone=e,t.isNullOrUndefined=n,t.isUndefined=o,t.isNumber=i,t.isString=r,t.isFiniteNumber=s,t.isNotANumber=a,t.toInt32=u,t.queueFn=c,t.toJson=h,t.parseJson=f}(t.System||(t.System={}))}(Taffy||(Taffy={}));var Taffy;!function(t){t.version="1.1"}(Taffy||(Taffy={}));var Taffy;!function(t){"use strict";var e;!function(t){function e(){return n}var n=Boolean("localStorage"in window&&window.localStorage);t.isAvailable=e}(e=t.LocalStorage||(t.LocalStorage={}));var n=function(){function t(t){this._prefix="",this._prefix=t?t+".":""}return Object.defineProperty(t,"isAvailable",{get:function(){return e.isAvailable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"prefix",{get:function(){return this._prefix},enumerable:!0,configurable:!0}),t.prototype.setValue=function(e,n,o){return t.isAvailable&&localStorage.setItem(this._prefix+e,JSON.stringify(n,o)),this},t.prototype.getValue=function(e,n){if(t.isAvailable){var o=this.getItem(e);return null!=o?JSON.parse(o,n):null}return null},t.prototype.getItem=function(e){return t.isAvailable?localStorage.getItem(this._prefix+e):null},t.prototype.remove=function(e){return t.isAvailable&&localStorage.removeItem(this._prefix+e),this},t.prototype.removeAll=function(){var t=this.getKeys();for(var e in t)this.remove(t[e]);return this},t.prototype.contains=function(t){return null!==this.getItem(t)},t.prototype.getKeys=function(e){var n=[];if(t.isAvailable)for(var o in localStorage)this.isAppKey(o)&&(this._prefix&&(o=o.slice(this._prefix.length)),e&&!e(o)||n.push(o));return n},t.prototype.isAppKey=function(t){return!this._prefix||0===t.indexOf(this._prefix)},t.prototype.addStorageListener=function(t,e){return addEventListener("storage",t,e),this},t}();t.AppStorage=n}(Taffy||(Taffy={}));var Taffy;!function(t){"use strict";var e=function(){function e(t){this._prefix="",this._prefix=t?t+".":""}return Object.defineProperty(e,"isAvailable",{get:function(){return t.LocalStorage.isAvailable()},enumerable:!0,configurable:!0}),e.prototype.prefix=function(){return this._prefix},e.prototype.setValue=function(t,n,o,i){return e.isAvailable&&localStorage.setItem(this._prefix+t,JSON.stringify(n,i)),o&&o(),this},e.prototype.getValue=function(t,n,o){if(e.isAvailable){var i=this.getRawItem(t);n(null!=i?JSON.parse(i,o):null)}else n(null);return this},e.prototype.setItem=function(t,e,n){return this.setValue(t,e,n)},e.prototype.getItem=function(t,e){return this.getValue(t,e)},e.prototype.remove=function(t,n){return e.isAvailable&&localStorage.removeItem(this._prefix+t),n&&n(),this},e.prototype.removeAll=function(t){var e=this;return this.getKeys(function(n){for(var o in n)e.remove(n[o]);t&&t()}),this},e.prototype.contains=function(t,n){var o;return e.isAvailable&&(o=this.getRawItem(t)),n(null!==o),this},e.prototype.getKeys=function(t,n){var o=[];if(e.isAvailable)for(var i in localStorage)this.isAppKey(i)&&(this._prefix&&(i=i.slice(this._prefix.length)),n&&!n(i)||o.push(i));return t(o),this},e.prototype.getRawItem=function(t){return localStorage.getItem(this._prefix+t)},e.prototype.isAppKey=function(t){return!this._prefix||0===t.indexOf(this._prefix)},e.prototype.addStorageListener=function(t){return addEventListener("storage",function(e){t({key:e.key,oldValue:e.oldValue,newValue:e.newValue,storageArea:"localstorage"})}),this},e}();t.AppStorageAsync=e}(Taffy||(Taffy={}));var Taffy;!function(t){"use strict"}(Taffy||(Taffy={}));var Taffy;!function(t){"use strict";var e=void 0,n=function(){function t(t){this._canvas=t,this._context=t.getContext("2d")}return Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvas",{get:function(){return this._canvas},enumerable:!0,configurable:!0}),t.prototype.toDataUrl=function(){return this._canvas.toDataURL()},t.prototype.fillStyle=function(t){return t===e?this.context.fillStyle:(this.context.fillStyle=t,this)},t.prototype.strokeStyle=function(t){return t===e?this.context.strokeStyle:(this.context.strokeStyle=t,this)},t.prototype.lineWidth=function(t){return t===e?this.context.lineWidth:(this.context.lineWidth=t,this)},t.prototype.lineCap=function(t){return t===e?this.context.lineCap:(this.context.lineCap=t,this)},t.prototype.lineJoin=function(t){return t===e?this.context.lineJoin:(this.context.lineJoin=t,this)},t.prototype.miterLimit=function(t){return t===e?this.context.miterLimit:(this.context.miterLimit=t,this)},t.prototype.lineDash=function(t){return"setLineDash"in this.context?t===e?this.context.getLineDash():(this.context.setLineDash(t),this):(console.log(function(){return"setLineDash not supported by the browser"}),null)},t.prototype.shadowColor=function(t){return t===e?this.context.shadowColor:(this.context.shadowColor=t,this)},t.prototype.shadowBlur=function(t){return t===e?this.context.shadowBlur:(this.context.shadowBlur=t,this)},t.prototype.shadowOffsetX=function(t){return t===e?this.context.shadowOffsetX:(this.context.shadowOffsetX=t,this)},t.prototype.shadowOffsetY=function(t){return t===e?this.context.shadowOffsetY:(this.context.shadowOffsetY=t,this)},t.prototype.shadowOffset=function(t,n){return t===e?{offsetX:this.shadowOffsetX(),offsetY:this.shadowOffsetY()}:(this.shadowOffsetX(t),this.shadowOffsetY(n===e?t:n),this)},t.prototype.shadowStyle=function(t,e,n,o){return this.context.shadowColor=t,this.context.shadowOffsetX=e,this.context.shadowOffsetY=n,this.context.shadowBlur=o,this},t.prototype.font=function(t){return t===e?this.context.font:(this.context.font=t,this)},t.prototype.textAlign=function(t){return t===e?this.context.textAlign:(this.context.textAlign=t,this)},t.prototype.textBaseline=function(t){return t===e?this.context.textBaseline:(this.context.textBaseline=t,this)},t.prototype.globalAlpha=function(t){return t===e?this.context.globalAlpha:(this.context.globalAlpha=t,this)},t.prototype.globalCompositeOperation=function(t){return t===e?this.context.globalCompositeOperation:(this.context.globalCompositeOperation=t,this)},t.prototype.clear=function(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this},t.prototype.clearRect=function(t,e,n,o){return this.context.clearRect(t,e,n,o),this},t.prototype.save=function(){return this.context.save(),this},t.prototype.restore=function(){return this.context.restore(),this},t.prototype.scale=function(t,e){return this.context.scale(t,e||t),this},t.prototype.translate=function(t,e){return this.context.translate(t,e),this},t.prototype.rotate=function(t){return this.context.rotate(t),this},t.prototype.transform=function(t,e,n,o,i,r){return this.context.transform(t,e,n,o,i,r),this},t.prototype.setTransform=function(t,e,n,o,i,r){return this.context.setTransform(t,e,n,o,i,r),this},t.prototype.drawImage=function(t,e,n,o,i){return void 0===o&&(o=t.width),void 0===i&&(i=t.height),this.context.drawImage(t,e,n,o,i),this},t.prototype.drawClippedImage=function(t,e,n,o,i,r,s,a,u){return void 0===a&&(a=o),void 0===u&&(u=i),this.context.drawImage(t,e,n,o,i,r,s,a,u),this},t.prototype.drawRotatedImage=function(t,e,n,o,i,r){void 0===i&&(i=t.width),void 0===r&&(r=t.height),this.context.save(),this.context.translate(e,n),this.context.rotate(o);var s=(i||t.width)/2,a=(r||t.height)/2;return this.context.drawImage(t,-s,-a,i,r),this.context.restore(),this},t.prototype.drawLine=function(t,e,n,o){return this.context.beginPath(),this.context.moveTo(t,e),this.context.lineTo(n,o),this.context.stroke(),this},t.prototype.drawLines=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.definePolyline(t)&&this.context.stroke(),this},t.prototype.drawCircle=function(e,n,o){return this.beginPath().arc(e,n,o,0,t.TWO_PI,!0).closePath().stroke(),this},t.prototype.fillCircle=function(e,n,o){return this.beginPath().arc(e,n,o,0,t.TWO_PI,!0).closePath().fill(),this},t.prototype.drawArc=function(t,e,n,o,i,r){return void 0===r&&(r=!1),this.beginPath().arc(t,e,n,o,i,r).stroke(),this},t.prototype.fillArc=function(t,e,n,o,i,r){return void 0===r&&(r=!1),this.beginPath().arc(t,e,n,o,i,r).fill(),this},t.prototype.drawEllipse=function(t,e,n,o){return n===o?this.drawCircle(t,e,n):(this.defineEllipse(t,e,n,o).stroke(),this)},t.prototype.fillEllipse=function(t,e,n,o){return n===o?this.fillCircle(t,e,n):(this.defineEllipse(t,e,n,o).fill(),this)},t.prototype.drawRect=function(t,e,n,o){return this.context.strokeRect(t,e,n,o),this},t.prototype.fillRect=function(t,e,n,o){return this.context.fillRect(t,e,n,o),this},t.prototype.drawRoundedRect=function(t,e,n,o,i){return"number"==typeof i&&(i=[i,i,i,i]),this.defineRoundedRect(t,e,n,o,i),this.context.stroke(),this},t.prototype.fillRoundedRect=function(t,e,n,o,i){return"number"==typeof i&&(i=[i,i,i,i]),this.defineRoundedRect(t,e,n,o,i),this.context.fill(),this},t.prototype.drawShape=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.definePolyline(t)&&(this.context.closePath(),this.context.stroke()),this},t.prototype.fillShape=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.definePolyline(t)&&(this.context.closePath(),this.context.fill()),this},t.prototype.drawText=function(t,n,o,i){return i===e?this.context.strokeText(t,n,o):this.context.strokeText(t,n,o,i),this},t.prototype.fillText=function(t,n,o,i){return i===e?this.context.fillText(t,n,o):this.context.fillText(t,n,o,i),this},t.prototype.measureText=function(t){return this.context.measureText(t).width},t.prototype.createLinearGradient=function(t,e,n,o){for(var i=[],r=4;r<arguments.length;r++)i[r-4]=arguments[r];var s=this.context.createLinearGradient(t,e,n,o);return this.addGradientColorStops.apply(this,[s].concat(i))},t.prototype.createRadialGradient=function(t,e,n,o,i,r){for(var s=[],a=6;a<arguments.length;a++)s[a-6]=arguments[a];var u=this.context.createRadialGradient(t,e,n,o,i,r);return this.addGradientColorStops.apply(this,[u].concat(s))},t.prototype.createPattern=function(e,n){return void 0===n&&(n=t.Repetition.repeat),this.context.createPattern(e,n)},t.prototype.drawLinearGradient=function(e,n,o,i,r){for(var s=[],a=5;a<arguments.length;a++)s[a-5]=arguments[a];if(r<0||r>t.PI_OVER_2)throw new Error("CanvasContext2D.drawLinearGradient angle must be between 0 and PI/2");var u=Math.cos(r),c=Math.sin(r),h=this.createLinearGradient.apply(this,[e,n,e+u*o,n+c*i].concat(s));return this.save().fillStyle(h).fillRect(e,n,o,i).restore(),this},t.prototype.drawRadialGradient=function(t,e,n){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];var r=this.createRadialGradient.apply(this,[t,e,n,t,e,0].concat(o));return this.save().fillStyle(r).fillCircle(t,e,n).restore(),this},t.prototype.drawPattern=function(e,n,o,i,r,s){void 0===s&&(s=t.Repetition.repeat);var a=r instanceof CanvasPattern?r:this.createPattern(r,s);return this.save().fillStyle(a).translate(e,n).fillRect(0,0,o,i).restore(),this},t.prototype.createImageData=function(t,n){return n===e?this.context.createImageData(t):this.context.createImageData(t,n)},t.prototype.getImageData=function(t,e,n,o){return this.context.getImageData(t||0,e||0,n||this.canvas.width,o||this.canvas.height)},t.prototype.putImageData=function(t,n,o,i,r,s,a){return void 0===n&&(n=0),void 0===o&&(o=0),i===e?this.context.putImageData(t,n,o):s===e?this.context.putImageData(t,n,o,i,r):this.context.putImageData(t,n,o,i,r,s,a),this},t.prototype.rect=function(t,e,n,o){return this.context.rect(t,e,n,o),this},t.prototype.fill=function(){return this.context.fill(),this},t.prototype.stroke=function(){return this.context.stroke(),this},t.prototype.beginPath=function(){return this.context.beginPath(),this},t.prototype.closePath=function(){return this.context.closePath(),this},t.prototype.moveTo=function(t,e){return this.context.moveTo(t,e),this},t.prototype.lineTo=function(t,e){return this.context.lineTo(t,e),this},t.prototype.quadraticCurveTo=function(t,e,n,o){return this.context.quadraticCurveTo(t,e,n,o),this},t.prototype.bezierCurveTo=function(t,e,n,o,i,r){return this.context.bezierCurveTo(t,e,n,o,i,r),this},t.prototype.arc=function(t,e,n,o,i,r){return this.context.arc(t,e,n,o,i,r),this},t.prototype.arcTo=function(t,e,n,o,i){return this.context.arcTo(t,e,n,o,i),this},t.prototype.setClipRect=function(t,e,n,o){return this.beginPath().rect(t,e,n,o).clip(),this},t.prototype.clip=function(){return this.context.clip(),this},t.prototype.isPointInPath=function(t,e){return this.context.isPointInPath(t,e)},t.prototype.defineRoundedRect=function(t,e,n,o,i){return this.context.beginPath(),this.context.moveTo(t+i[0],e),this.context.lineTo(t+n-i[1],e),this.context.quadraticCurveTo(t+n,e,t+n,e+i[1]),this.context.lineTo(t+n,e+o-i[2]),this.context.quadraticCurveTo(t+n,e+o,t+n-i[2],e+o),this.context.lineTo(t+i[3],e+o),this.context.quadraticCurveTo(t,e+o,t,e+o-i[3]),this.context.lineTo(t,e+i[0]),this.context.quadraticCurveTo(t,e,t+i[0],e),this.context.closePath(),this},t.prototype.defineEllipse=function(e,n,o,i){var r=Math.max(o,i),s=o/r,a=i/r;return this.context.save(),this.context.translate(e,n),this.context.scale(s,a),this.context.beginPath(),this.context.arc(0,0,r,0,t.TWO_PI,!0),this.context.closePath(),this.context.restore(),this},t.prototype.definePolyline=function(t){if(t.length>2){this.context.beginPath(),this.context.moveTo(t[0],t[1]);for(var e=2;e<t.length;e+=2)this.context.lineTo(t[e],t[e+1]);return!0}return!1},t.prototype.addGradientColorStops=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(e&&e.length>0)if(2===e.length&&"string"==typeof e[0])t.addColorStop(0,e[0]),t.addColorStop(1,e[1]);else for(var o=0;o<e.length;o++){var i=e[o];t.addColorStop(i.offset,i.color)}return t},t.toRadians=function(e){return t.PI_OVER_180*e},t}();n.PI_OVER_180=Math.PI/180,n.PI_OVER_2=Math.PI/2,n.TWO_PI=2*Math.PI,n.TAU=2*Math.PI,n.TextBaseline={top:"top",middle:"middle",bottom:"bottom",alphabetic:"alphabetic",hanging:"hanging"},n.TextAlign={left:"left",right:"right",center:"center",start:"start",end:"end"},n.Repetition={repeat:"repeat",repeatX:"repeat-x",repeatY:"repeat-y",noRepeat:"no-repeat"},n.CompositeOperation={sourceOver:"source-over",sourceAtop:"source-atop",sourceIn:"source-in",sourceOut:"source-out",destinationOver:"destination-over",destinationAtop:"destination-atop",destinationIn:"destination-in",destinationOut:"destination-out",lighter:"lighter",copy:"copy",xor:"xor"},n.LineCap={butt:"butt",round:"round",square:"square"},n.LineJoin={bevel:"bevel",round:"round",miter:"miter"},t.CanvasContext2D=n}(Taffy||(Taffy={}));var Taffy;!function(t){"use strict";!function(t){function e(t,e,n){return x("click",t,e,n)}function n(t,e,n){return x("dblclick",t,e,n)}function o(t,e,n){return x("mousedown",t,e,n)}function i(t,e,n){return x("mouseup",t,e,n)}function r(t,e,n){return x("mousemove",t,e,n)}function s(t,e,n){return x("mouseout",t,e,n)}function a(t,e,n){return x("mouseover",t,e,n)}function u(t,e,n){return g("touchstart",t,e,n)}function c(t,e,n){return g("touchend",t,e,n)}function h(t,e,n){return g("touchmove",t,e,n)}function f(t,e,n){return g("touchcancel",t,e,n)}function p(t,e,n){return m("keypress",t,e,n)}function l(t,e,n){return m("keydown",t,e,n)}function d(t,e,n){return m("keyup",t,e,n)}function y(t,e,n){return t.addEventListener("webkitTransitionEnd",function(n){return e(new w(t,n))},n),t.addEventListener("transitionend",function(n){return e(new w(t,n))},n),this}function v(t){var e=t.getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset}}function x(t,e,n,o){return e.addEventListener(t,function(t){return n(new b(e,t))},o),e}function g(t,e,n,o){return e.addEventListener(t,function(t){return n(new T(e,t))},o),e}function m(t,e,n,o){return e.addEventListener(t,function(t){return n(new _(e,t))},o),e}var w=function(){function t(t,e){this.element=t,this.baseEvent=e}return t.prototype.stopPropagation=function(){return this.baseEvent.stopPropagation(),this},t.prototype.preventDefault=function(){return this.baseEvent.preventDefault(),this},t}();t.ElementEvent=w;var b=function(t){function e(e,n){var o=t.call(this,e,n)||this,i=v(e);return o.elementX=n.pageX-i.left,o.elementY=n.pageY-i.top,o}return __extends(e,t),e}(w);t.ElementMouseEvent=b;var T=function(t){function e(e,n){var o=t.call(this,e,n)||this;if(o.elementPoints=[],n.touches&&n.touches.length>0)for(var i=v(e),r=n.touches.length,s=0;s<r;s++){var a=n.touches.item(s),u={x:a.pageX-i.left,y:a.pageY-i.top};o.elementPoints.push(u),0===s&&(o.elementX=u.x,o.elementY=u.y)}return o}return __extends(e,t),e}(w);t.ElementTouchEvent=T;var _=function(t){function e(e,n){return t.call(this,e,n)||this}return __extends(e,t),Object.defineProperty(e.prototype,"keyCode",{get:function(){return this.baseEvent.which},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyNumber",{get:function(){return this.baseEvent.which},enumerable:!0,configurable:!0}),e}(w);t.ElementKeyboardEvent=_,t.onClick=e,t.onDblClick=n,t.onMouseDown=o,t.onMouseUp=i,t.onMouseMove=r,t.onMouseOut=s,t.onMouseOver=a,t.onTouchStart=u,t.onTouchEnd=c,t.onTouchMove=h,t.onTouchCancel=f,t.onKeyPress=p,t.addKeyDownListener=l,t.addKeyUpListener=d,t.onTransitionEnd=y}(t.Events||(t.Events={}))}(Taffy||(Taffy={}));var Taffy;!function(t){"use strict";!function(t){function e(){var t={},e=window.location.search.slice(1);return e.length>0&&e.split("&").forEach(function(e){var n=e.split("=");t[n[0]]=decodeURIComponent(n[1])}),t}function n(t,e,n,o){return window.open(t,e,n,o)}function o(){return"ontouchstart"in document.documentElement}function i(){return"onpointerdown"in document.documentElement}function r(){return"onmousedown"in document.documentElement}function s(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return window.setInterval(t,e,n)}function a(t){window.clearInterval(t)}function u(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return window.setTimeout(t,e,n)}function c(t){window.clearTimeout(t)}function h(t){return window.confirm(t)}function f(t){window.alert(t)}function p(t){return window.requestAnimationFrame(t)}function l(t){window.cancelAnimationFrame(t)}function d(t){"interactive"==document.readyState||"complete"==document.readyState?t():document.addEventListener("DOMContentLoaded",function(e){return t()})}t.getQueryParameters=e,t.openWindow=n,t.isTouchSupported=o,t.isPointerSupported=i,t.isMouseSupported=r,t.setInterval=s,t.clearInterval=a,t.setTimeout=u,t.clearTimeout=c,t.confirm=h,t.alert=f,t.requestAnimationFrame=p,t.cancelAnimationFrame=l,t.ready=d,function(){window.requestAnimationFrame=window.requestAnimationFrame||window.msRequestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return u(t,0)},window.cancelAnimationFrame=window.cancelAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelAnimationFrame||function(t){}}()}(t.System||(t.System={}))}(Taffy||(Taffy={}));